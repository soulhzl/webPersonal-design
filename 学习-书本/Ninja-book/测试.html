<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	#test li.pass{
		color: green;
	}

	#test li.fail{
		color: red;
	}
</style>
</head>
<body>
	<ul id="test"></ul>
	<button id="btn">click!!!</button>
	<!-- <script type="text/javascript" src="jquery-3.2.1.min.js"></script> -->
	<script type="text/javascript" src="util.js"></script>
	<!-- <script type="text/javascript" src="asyncAssert.js"></script> -->
	<script type="text/javascript">
		/* 1-测试 */
		/*window.onload = function(){
			test('A Test', function(){
				pause();
				setTimeout(function(){
					assert(true, 'first');
					resume();
				}, 1000);
			});

			test('Other Test', function(){
				pause();
				setTimeout(function(){
					assert(true, 'second');
					resume();
				}, 1000);
			});
		};*/

		/* 2-测试 */
		/*let store = {
			nextId : 1,
			cache : {},
			add : function(fn){
				if (!fn.id) {
					fn.id = store.nextId++;
					return !!(store.cache[fn.id] = fn);
				}
			}
		};

		function sync(){}

		assert(store.add(sync), 'how??');
		assert(store.add(sync), 'how??');*/

		/* 3-测试 */
		/*let elems = {
			length : 0,

			add : function(element){
				Array.prototype.push.call(this, element);
			},

			gather : function(attr){
				this.add(document.querySelector(attr));
			}
		};
		elems.gather('#test');
		log(elems[0].nodeType);
		assert(elems.length == 1 && elems[0].nodeType, 'OK?');*/

		/* 4-测试 */
		/*function smallest(arr){
			return Math.min.apply(Math, arr);
		}

		log(smallest([2, 1, 3, 5]));*/

		/* 5-测试 */
		/*function merge(root){
			for (var i = 1; i < arguments.length; i++) {
				for (var key in arguments[i]) {
					root[key] = arguments[i][key];
				}
			}
			return root;
		}

		let merged = merge({
			name : 'haha',
			age : 22
		});

		log(merged.name);
		log(merged.age);*/

		/* 6-测试 */
		/*let button = {
			clicked : false,
			click : function(){
				this.clicked = true;
				assert(button.clicked, "OK???");
				console.log(this);
			}
		};

		function binding(ctx, name){
			return function(){
				return ctx[name].apply(ctx, arguments);
			};
		}

		let btn = document.querySelector('#btn');
		btn.addEventListener('click', binding(button, 'click'), false);*/

		/* 7-测试 */
		/*(function(){
			let btn = document.querySelector('#btn'),
			num = 0;
			btn.addEventListener('click', function(){
				console.log(num++);
			}, false)
		})();*/

		/* 8-测试 */
		function User(name, age){
			if (!(this instanceof arguments.callee)) {
				return new User(name, age);
			}
			this.mess = name + ':' + age;
		}

		var user = User('haha', 22);

		assert(user, 'OK?');
	</script>
</body>
</html>