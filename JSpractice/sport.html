<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="reset.css">
	<style type="text/css">
	#box{
		position: absolute;
		left: 0;
		top: 0;
		width: 100px;
		height: 100px;
		background-color: red;
	}
</style>
</head>
<body>
	<div id="box"></div>
	<script type="text/javascript">
		var box = document.querySelector("#box");

		function move(obj, attr, time, value, callback){
			var nowtime = new Date(),
			starValue = parseFloat(getComputedStyle(obj)[attr]);
			obj.timeid = setInterval(function(){
				var currentTime = (new Date() - nowtime) / time;
				if (currentTime >= 1) {
					clearInterval(obj.timeid);
					callback && callback();
					// console.log(currentTime);
				}
				// console.log(obj.style[attr]);
				obj.style[attr] = starValue + (currentTime * value) + "px";
			}, 1000/60);
		}

		move(box, "left", 3000, 600, function(){
			move(box, "top", 3000, 600, function(){
				move(box, "left", 3000, -600, function(){
					move(box, "top", 3000, -600, function(){

					});
				});
			});
		});
	</script>
</body>
</html>