<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	.scroll{
		position: relative;
		height: 25px;
		width: 300px;
		background-color: #FFE66F;
		border: 2px solid #82D900;
		border-radius: 15px;
	}

	.dian{
		position: absolute;
		top: 3px;
		left: 0;
		height: 15px;
		width: 15px;
		background-color: #CDCD9A;
		border: 2px solid #BEBEBE;
		border-radius: 10px;
	}
</style>
</head>
<body>
	<div class="scroll">
		<div class="dian"></div>
	</div>

	<div id="baifenbi"></div>

	<script type="text/javascript">
		var scroll = document.getElementsByClassName('scroll')[0];
		var dian = document.getElementsByClassName('dian')[0];
		var baifenbi = document.getElementById('baifenbi');
		var barleft = 0;
		dian.onmousedown = function(event){
			var event = event || window.event;
			var leftVal = event.clientX - this.offsetLeft;
			var that = this;
        // 拖动一定写到 down 里面才可以
        document.onmousemove = function(event){
       			var event = event || window.event;
       			barleft = event.clientX - leftVal;    
       			if(barleft < 0){
       				barleft = 0;
       			}
       			else if(barleft > scroll.offsetWidth - dian.offsetWidth - 5){
       				barleft = scroll.offsetWidth - dian.offsetWidth - 5;
       			}
       			that.style.left = barleft + "px";
       			
       			baifenbi.innerHTML = parseInt(barleft / (scroll.offsetWidth - 24) * 100) + '%';
        		//防止选择内容--当拖动鼠标过快时候，弹起鼠标，bar也会移动，修复bug
        		window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
    		}

		}

		document.onmouseup = function(){
      		document.onmousemove = null; //弹起鼠标不做任何操作
  		}
</script>
</body>
</html>