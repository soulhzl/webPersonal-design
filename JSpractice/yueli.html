<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>月历</title>
	<script type="text/javascript">
	var timeID = null;
	var timeRun = false;

		function stopClock(){
			if (timeRun) {
				clearTimeout(timeID);
				timeRun = false;
			}
		}

		function showtime(){
			var date = new Date();
			var hour = date.getHours();
			var minute = date.getMinutes();
			var second = date.getSeconds();
			var nowtime = "" + ((hour>12) ? hour - 12 : hour);
			nowtime += ((minute<10) ? ":0" : ":") + minute;
			nowtime += ((second<10) ? ":0" : ":") +second;
			nowtime += ((hour>12) ? "下午" : "上午");
			document.clock.fac.value = nowtime;
			timeID = setTimeout("showtime()", 1000);
			timeRun = true;
		}

		function starClock(){
			stopClock();
			showtime();
		}

		function montharr(m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11)
		{
			this[0] = m0;
			this[1] = m1;
			this[2] = m2;
			this[3] = m3;
			this[4] = m4;
			this[5] = m5;
			this[6] = m6;
			this[7] = m7;
			this[8] = m8;
			this[9] = m9;
			this[10] = m10;
			this[11] = m11;
		}

		function calendar(){
			var monthnames = "janfebmaraprmayjunjulaugsepoctnovdec";
			var today = new Date();
			var thisday;
			var monthDays = new montharr(31,28,31,30,31,30,31,31,30,31,30,31);
			var year = today.getYear() + 1900;
			thisday = today.getDate();
			if(((year%4==0)&&(year%100!=0)) || (year%400==0))
			{
				monthDays[1]=29;
			}
			nDays = monthDays[today.getMonth()];

			firstDay = today;
			firstDay.setDate(1);

			testMe = firstDay.getDate();

			if(testMe==2){
				firstDay.setDate(0);
			}

			startDay = firstDay.getDay();
			document.write("<table border='0' cellspacing='0' align='center' bgcolor='#0080FF'><tr><td><table border='0' cellspacing='1' cellspacing='2' bgcolor='Sliver'>");
			document.write("<tr><th colspan='7' bgcolor='#C8E3FF'>");
			var dayNames = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
			var monthnames = new Array("1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月");

			var now = new Date();

			document.write("<font style='font-size: 9pt;color: #330099;'>" + "公元" + now.getYear() + "年" + monthnames[now.getMonth()] + now.getDate() + "日" +dayNames[now.getDay()] + "</font>");

			document.writeln("</th></tr><tr><th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>日</font></th>");
			document.writeln("<th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>一</font></th>");
			document.writeln("<th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>二</font></th>");
			document.writeln("<th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>三</font></th>");
			document.writeln("<th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>四</font></th>");
			document.writeln("<th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>五</font></th>");
			document.writeln("<th bgcolor='#0080FF'><font style='font-size: 9pt;color: white;'>六</font></th>");
			document.writeln("</tr><tr>");

			var column = 0;

			for(i=0; i < startDay; i++){
				document.writeln("\n<td><font style='font-size:9pt;'></font></td>");
				column++;
			}

			for (var i = 1; i <= nDays; i++) {
				if (i==thisday) {
					document.writeln("</td><td align='center' bgcolor='#FF8040'><font style='font-size: 9pt;color: #FFFFFF;'><b>");
				}
				else{
					document.writeln("</td><td bgcolor='#FFFFFF' align='center'><font style='font-size: 9pt;font-family: Arial;font-weight: bold;color: #330066;'>");
				}
				document.writeln(i);
				if(i==thisday)
				{
					document.writeln("</font></td>");
					
				}
				column++;
				if (column==7) {
					document.writeln("<tr>");
					column=0;
				}
			}

			document.writeln("<tr><td colspan='7' align='center' valign='top' bgcolor='#0080FF'><form name='clock' onSubmit='0'><font style='font-size: 9pt;color: #FFFFFF;'>现在时间:<input type='text' name='fac' align='top'></font></td></tr></table></td></tr></table></form>");
		}
	</script>
</head>
<body onload="starClock();">
	<script type="text/javascript">
		calendar();
	</script>
</body>
</html>